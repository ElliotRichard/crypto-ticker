{"ast":null,"code":"import { sortOption } from '../services/crypto.service';\nexport class ChartData {\n  constructor() {\n    this.labels = [];\n    this.remove = [];\n    this.data = {};\n  }\n\n  _getRemoved() {\n    let labels = this.remove.slice();\n    this.remove = [];\n    return labels;\n  }\n\n  getLabels() {\n    return this.labels.slice();\n  }\n\n  getLegend(sortBy) {\n    let legend = {};\n    let labels = {};\n    let show = {};\n\n    switch (sortBy) {\n      case sortOption.name:\n        labels = this.getLabels().sort((a, b) => a.localeCompare(b));\n        break;\n\n      case sortOption.price:\n        labels = this.getLabels().sort((a, b) => {\n          return this.data[b][this.data[b].length - 1].value[1] - this.data[a][this.data[a].length - 1].value[1];\n        });\n    }\n\n    this._getRemoved().forEach(label => {\n      show[label] = false;\n    });\n\n    legend.selected = show;\n    legend.data = labels;\n    return legend;\n  }\n\n  getSeries(seriesType) {\n    let series = [];\n    this.labels.forEach(label => {\n      series.push({\n        name: label,\n        id: label,\n        type: seriesType,\n        showname: true,\n        showSymbol: false,\n        hoverAnimation: true,\n        data: this.data[label],\n        sampling: 'lttb'\n      });\n    });\n    return series.slice();\n  }\n\n  updateData(coins) {\n    let newCoins = [];\n    coins.forEach(coin => {\n      newCoins.push(coin.name);\n\n      if (!this.labels.includes(coin.name)) {\n        this.labels.push(coin.name);\n        this.data[coin.name] = [{\n          name: coin.timeDataFrom.toString(),\n          value: [coin.timeDataFrom.getTime(), coin.price]\n        }];\n      } else {\n        this.data[coin.name].push({\n          name: coin.timeDataFrom.toString(),\n          value: [coin.timeDataFrom.getTime(), coin.price]\n        });\n      }\n    });\n    this.labels.forEach(label => {\n      if (!newCoins.includes(label)) {\n        this.labels.splice(this.labels.indexOf(label), 1);\n        this.remove.push(label);\n        delete this.data[label];\n      }\n    });\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}